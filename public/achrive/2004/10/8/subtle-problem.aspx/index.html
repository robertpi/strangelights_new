<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width">
		

		<title>Subtle problem</title>

		
		<link rel="stylesheet" href="http://strangelights.com/css/colors-dark.min.217a2547e8e6c808986d22ef70b50263c2d6a4bbc80ed42e97e280a41103f9b5.css">

		
	</head>
	<body>
		<header id="header">
			<h1><a href="http://strangelights.com/">Strangelights</a></h1>
			<p></p>
		</header>

		<div id="page">
			<div id="sidebar">
				<nav>
	
</nav>

			</div>

			<div id="content">
				
	<article class="post">
		<h1><a href="http://strangelights.com/achrive/2004/10/8/subtle-problem.aspx/">Subtle problem</a> </h1>

		<div class="post-content"><p><P class=MsoNormal style="MARGIN: 0cm 0cm 0pt"><FONT face=Arial size=2>The following two lines of code look innocent enough, but they create a problem that took us ages to track down. (Well not these exact lines of code but you get the idea).</FONT></P>
<P class=MsoNormal style="MARGIN: 0cm 0cm 0pt">&lt;?xml:namespace prefix = o ns = &ldquo;urn:schemas-microsoft-com:office:office&rdquo; /&gt;<o:p><FONT face=Arial size=2>&nbsp;</FONT><a href="/o:p">/o:p</a></P>
<P class=MsoNormal style="MARGIN: 0cm 0cm 0pt; mso-layout-grid-align: none"><SPAN style="FONT-FAMILY: 'Courier New'; mso-bidi-font-size: 10.0pt"><FONT size=2>IPAddress address = IPAddress.Parse(&ldquo;&rdquo;);<o:p><a href="/o:p">/o:p</a></FONT></SPAN></P>
<P class=MsoNormal style="MARGIN: 0cm 0cm 0pt; mso-layout-grid-align: none"><SPAN style="FONT-FAMILY: 'Courier New'; mso-bidi-font-size: 10.0pt"><FONT size=2>Console.WriteLine(address.ToString());<o:p><a href="/o:p">/o:p</a></FONT></SPAN></P>
<P class=MsoNormal style="MARGIN: 0cm 0cm 0pt; mso-layout-grid-align: none"><o:p><FONT face=Arial size=2>&nbsp;</FONT><a href="/o:p">/o:p</a></P>
<P class=MsoNormal style="MARGIN: 0cm 0cm 0pt; mso-layout-grid-align: none"><FONT face=Arial size=2>The problem is on Windows XP (SP 1) this works fine, on Windows 2003 this code throws a FormatException. The reason is although you&#8217;re running exactly the same managed code the framework relies on unmanaged code to do most of the work, it p/invokes a method &#8220;inet_addr&#8221; in &#8220;ws2_32.dll&#8221; and this must be different between the two platforms. </FONT></P>
<P class=MsoNormal style="MARGIN: 0cm 0cm 0pt; mso-layout-grid-align: none"><o:p><FONT face=Arial size=2>&nbsp;</FONT><a href="/o:p">/o:p</a></P>
<P class=MsoNormal style="MARGIN: 0cm 0cm 0pt; mso-layout-grid-align: none"><FONT face=Arial size=2>I&#8217;ll explain why this caused us such a huge problem in another post. Well maybe.</FONT></P></p>
</div>

		<p class="meta">Posted on <span class="postdate">08. October 2004</span></p>
	</article>

			</div>

			<footer id="footer">
				<p class="copyright">
					
						Powered by <a href="https://gohugo.io/">Hugo</a> and the
						<a href="https://github.com/bake/solar-theme-hugo">Solar</a>-theme.
					
				</p>
			</footer>
		</div>

		
	</body>
</html>
