<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width">
		

		<title>Bending the Cat: F# meets WPF 3D</title>

		
		<link rel="stylesheet" href="http://strangelights.com/css/colors-dark.min.217a2547e8e6c808986d22ef70b50263c2d6a4bbc80ed42e97e280a41103f9b5.css">

		
	</head>
	<body>
		<header id="header">
			<h1><a href="http://strangelights.com/">Strangelights</a></h1>
			<p></p>
		</header>

		<div id="page">
			<div id="sidebar">
				<nav>
	
</nav>

			</div>

			<div id="content">
				
	<article class="post">
		<h1><a href="http://strangelights.com/achrive/2006/6/23/bending-the-cat-fsharp-meets-wpf-3d.aspx/">Bending the Cat: F# meets WPF 3D</a> </h1>

		<div class="post-content">

<p><P class=NormalVerdana style="MARGIN: 0in 0in 0pt"><SPAN style="FONT-SIZE: 10pt"><FONT face=Verdana>I&#8217;ve been playing with F# and Windows Presentation Foundation (WPF a.k.a Avalon) and the combination is really nice. WPF comes with a new(ish) markup language called Xaml. This is another declarative language that works in a complimentary way to F#. Xaml allows you initialise an object graph into a specific state in a declarative style; moreover various designers will soon be come available to do this, so you won&#8217;t even have to hand code the Xaml file. You can then load the xaml file and use F# to tweak resulting images.&lt;?xml:namespace prefix = o ns = &ldquo;urn:schemas-microsoft-com:office:office&rdquo; /&gt;<o:p><a href="/o:p">/o:p</a></FONT></SPAN></P>
<P class=NormalVerdana style="MARGIN: 0in 0in 0pt"><SPAN style="FONT-SIZE: 10pt"><o:p><FONT face=Verdana>&nbsp;</FONT><a href="/o:p">/o:p</a></SPAN></P>
<P class=NormalVerdana style="MARGIN: 0in 0in 0pt"><SPAN style="FONT-SIZE: 10pt"><FONT face=Verdana>I have written a sample in which we create a 3D scene with one object, a photo, which rotates slowly though 180 degrees. The vast majority of this is written in Xaml, the only thing we do in F# is add the plane to scene and apply various effects to it.<o:p><a href="/o:p">/o:p</a></FONT></SPAN></P>
<P class=NormalVerdana style="MARGIN: 0in 0in 0pt"><SPAN style="FONT-SIZE: 10pt"><o:p><FONT face=Verdana>&nbsp;</FONT><a href="/o:p">/o:p</a></SPAN></P>
<P class=NormalVerdana style="MARGIN: 0in 0in 0pt"><SPAN style="FONT-SIZE: 10pt"><FONT face=Verdana>Here are some of the resulting images; the rotation allows you to see the 3D effect clearly.<o:p><a href="/o:p">/o:p</a></FONT></SPAN></P>
<P class=NormalVerdana style="MARGIN: 0in 0in 0pt"><SPAN style="FONT-SIZE: 10pt"><o:p><FONT face=Verdana>&nbsp;</FONT><a href="/o:p">/o:p</a></SPAN></P>
<P><IMG src="/blog/photos/cat_cos1.jpg"><BR><IMG src="/blog/photos/cat_cos2.jpg"><BR><IMG src="/blog/photos/cat_random1.jpg"><BR><IMG src="/blog/photos/cat_random2.jpg"><BR><IMG src="/blog/photos/cat_random3.jpg"><BR><IMG src="/blog/photos/cat_waves1.jpg"><BR><IMG src="/blog/photos/cat_waves2.jpg"> </P>
<P class=NormalVerdana style="MARGIN: 0in 0in 0pt"><SPAN style="FONT-SIZE: 10pt"><FONT face=Verdana>The code is downloadable <A href="http://www.strangelights.com/download.aspx?url=/blog/downloads/XamlCatPlane.zip">here</A>. Or can be seen below:</FONT></SPAN></P>
<P class=NormalVerdana style="MARGIN: 0in 0in 0pt"><SPAN style="FONT-SIZE: 10pt"><FONT face=Verdana></FONT></SPAN>&nbsp;</P>
<P class=NormalVerdana style="MARGIN: 0in 0in 0pt"><SPAN style="FONT-SIZE: 10pt"><SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: black; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent"><SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">open</SPAN> System<BR><SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">open</SPAN> System.Collections.Generic <BR><SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">open</SPAN> System.IO<BR><SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">open</SPAN> System.Windows<BR><SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">open</SPAN> System.Windows.Controls<BR><SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">open</SPAN> System.Windows.Markup<BR><SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">open</SPAN> System.Windows.Media<BR><SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">open</SPAN> System.Windows.Media.Media3D<BR><SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">open</SPAN> System.Xml<BR><BR>#I <SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: red; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">@&ldquo;C:\Program Files\Reference Assemblies\Microsoft\WinFx\v3.0&rdquo;</SPAN> ;;<BR>#r <SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: red; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">@&ldquo;PresentationCore.dll&rdquo;</SPAN> ;;<BR>#r <SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: red; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">@&ldquo;PresentationFramework.dll&rdquo;</SPAN> ;;<BR>#r <SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: red; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">@&ldquo;WindowsBase.dll&rdquo;</SPAN> ;;<BR><BR><SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: green; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">// creates the window and loads given the Xaml file into it</SPAN><BR><SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">let</SPAN> create_window (file : <SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">string</SPAN>) = <BR>&nbsp;Idioms.using&nbsp; (XmlReader.Create(file))<BR>&nbsp;(<SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">fun</SPAN> stream -&gt; <BR>&nbsp;&nbsp;<SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">let</SPAN> temp = XamlReader.Load(stream) :?&gt; Window <SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">in</SPAN><BR>&nbsp;&nbsp;temp.Height &lt;- 400.0;<BR>&nbsp;&nbsp;temp.Width &lt;- 400.0;<BR>&nbsp;&nbsp;temp.Title &lt;- <SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: red; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">&ldquo;F# meets Xaml&rdquo;</SPAN><SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">;</SPAN><BR>&nbsp;&nbsp;temp)<BR><BR><SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: green; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">// finds all the MeshGeometry3D in a given 3D view port</SPAN><BR><SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">let</SPAN> find_meshes ( viewport : Viewport3D ) = <BR>&nbsp;viewport.Children&nbsp;<BR><SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: black; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">&nbsp;|&gt; IEnumerable.choose (<SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">function</SPAN> <SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">:?</SPAN> ModelVisual3D <SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">as</SPAN> c -&gt; Some(c.Content) <SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">|</SPAN> _ -&gt; None)<BR>&nbsp;|&gt; IEnumerable.choose (<SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">function</SPAN> <SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">:?</SPAN> Model3DGroup <SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">as</SPAN> mg -&gt; Some(mg.Children) <SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">|</SPAN> _ -&gt; None)<BR>&nbsp;|&gt; IEnumerable.concat<BR>&nbsp;|&gt; IEnumerable.choose (<SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">function</SPAN> <SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">:?</SPAN> GeometryModel3D <SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">as</SPAN> mg -&gt; Some(mg.Geometry) <SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">|</SPAN> _ -&gt; None)<BR>&nbsp;|&gt; IEnumerable.choose (<SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">function</SPAN> <SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">:?</SPAN> MeshGeometry3D <SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">as</SPAN> mv -&gt; Some(mv) <SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">|</SPAN> _ -&gt; None)</SPAN><BR><SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: green; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent"></SPAN></SPAN></SPAN></P>
<P class=NormalVerdana style="MARGIN: 0in 0in 0pt"><SPAN style="FONT-SIZE: 10pt"><SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: black; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent"><SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: green; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">// loop function to create all items necessary for a plane</SPAN><BR><SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">let</SPAN> create_plane_item_list f (x_res : <SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">int</SPAN>) (y<em>res : <SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">int</SPAN>) = <BR>&nbsp;<SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">let</SPAN> list = <SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">new</SPAN> List&lt;</em>&gt;() <SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">in</SPAN><BR>&nbsp;<SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">for</SPAN> x = 0 <SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">to</SPAN> x_res - 1 <SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">do</SPAN><BR>&nbsp;&nbsp;<SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">for</SPAN> y = 0 <SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">to</SPAN> y_res - 1 <SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">do</SPAN><BR>&nbsp;&nbsp;&nbsp;f list x y<BR>&nbsp;&nbsp;<SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">done</SPAN><BR>&nbsp;<SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">done</SPAN>;<BR>&nbsp;list<BR><BR><SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: green; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">// function to initalise a point</SPAN><BR><SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">let</SPAN> point x y = <SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">new</SPAN> Point(x, y)<BR><SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: green; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">// function to initalise a &ldquo;d point</SPAN><BR><SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">let</SPAN> point3D x y = <SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">new</SPAN> Point3D(x, y, 0.0)<BR><BR><SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: green; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">// create all the points necessary for a square in the plane</SPAN><BR><SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">let</SPAN> create_square f (x_step : float) (y<em>step : float) (list : List&lt;</em>&gt;) (x : <SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">int</SPAN>) (y : <SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">int</SPAN>) = <BR>&nbsp;<SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">let</SPAN> x&rsquo; =&nbsp; Float.of_int x * x_step <SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">in</SPAN><BR>&nbsp;<SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">let</SPAN> y&rsquo; =&nbsp; Float.of_int y * y_step <SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">in</SPAN><BR>&nbsp;list.Add(f x&rsquo; y&rsquo;)<SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">;</SPAN><BR>&nbsp;list.Add(f (x&rsquo; + x_step) y&rsquo;)<SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">;</SPAN><BR>&nbsp;list.Add(f (x&rsquo; + x_step) (y&rsquo; + y_step))<SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">;</SPAN><BR>&nbsp;list.Add(f (x&rsquo; + x_step) (y&rsquo; + y_step))<SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">;</SPAN><BR>&nbsp;list.Add(f x&rsquo; (y&rsquo; + y_step))<SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">;</SPAN><BR>&nbsp;list.Add(f x&rsquo; y&rsquo;)<BR><BR><SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: green; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">// create all items in a plane</SPAN><BR><SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">let</SPAN> create_plane_points f x_res y_res = <BR>&nbsp;<SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">let</SPAN> x_step = 1.0 / Float.of_int x_res <SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">in</SPAN><BR>&nbsp;<SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">let</SPAN> y_step = 1.0 / Float.of_int y_res <SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">in</SPAN><BR>&nbsp;create_plane_item_list (create_square f x_step y_step) x_res y_res<BR>&nbsp;<BR><SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: green; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">// create the 3D positions for a plane, i.e. the thing that says where</SPAN><BR><SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: green; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">// the plane will be in 3D space</SPAN><BR><SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">let</SPAN> create_plane_positions x_res y_res = <BR>&nbsp;<SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">let</SPAN> list = create_plane_points point3D x_res y_res <SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">in</SPAN><BR>&nbsp;<SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">new</SPAN> Point3DCollection(list)<BR><BR><SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: green; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">// create the texture mappings for a plane, i.e. the thing that </SPAN><BR><SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: green; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">// maps the 2D image to the 3D plane</SPAN><BR><SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">let</SPAN> create_plane_textures x_res y_res = <BR>&nbsp;<SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">let</SPAN> list = create_plane_points point x_res y_res <SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">in</SPAN><BR>&nbsp;<SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">new</SPAN> PointCollection(list)<BR><BR><SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: green; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">// create indices list fora ll our triangles&nbsp;</SPAN><BR><SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">let</SPAN> create_indices_plane width height = <BR>&nbsp;<SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">let</SPAN> list = <SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">new</SPAN> System.Collections.Generic.List&lt;<SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">int</SPAN>&gt;() <SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">in</SPAN><BR>&nbsp;<SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">for</SPAN> index = 0 <SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">to</SPAN> width * height * 6 <SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">do</SPAN><BR>&nbsp;&nbsp;list.Add(index)<BR>&nbsp;<SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">done</SPAN>;<BR>&nbsp;<SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">new</SPAN> Int32Collection(list)<BR><BR><SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: green; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">// center the plane in the field of view</SPAN><BR><SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">let</SPAN> map_positions_center (positions : Point3DCollection) = <BR>&nbsp;<SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">let</SPAN> new_positions = positions |&gt; IEnumerable.map&nbsp; <BR>&nbsp;&nbsp;(<SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">fun</SPAN> position -&gt; <BR>&nbsp;&nbsp;&nbsp;<SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">new</SPAN> Point3D((position.X - 0.5 ) * -1.0 <SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">,</SPAN> (position.Y - 0.5 ) * -1.0, position.Z)) <SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">in</SPAN><BR>&nbsp;<SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">new</SPAN> Point3DCollection(new_positions)<BR><BR><SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: green; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">// create a plane and add it to the given mesh</SPAN><BR><SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">let</SPAN> add_plane_to_mesh (mesh : MeshGeometry3D) x_res y_res = <BR>&nbsp;mesh.Positions &lt;- map_positions_center (create_plane_positions x_res y_res)<SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">;</SPAN><BR>&nbsp;mesh.TextureCoordinates &lt;- create_plane_textures x_res y_res;<BR>&nbsp;mesh.TriangleIndices &lt;- create_indices_plane x_res y_res<BR><BR><SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: green; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">// generic function for mapping Z plane relative to x y plane</SPAN><BR><SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">let</SPAN> map_positions f (positions : Point3DCollection) = <BR>&nbsp;<SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">let</SPAN> new_positions = positions |&gt; IEnumerable.map&nbsp; <BR>&nbsp;&nbsp;(<SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">fun</SPAN> position -&gt; <BR>&nbsp;&nbsp;&nbsp;<SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">new</SPAN> Point3D(position.X, position.Y, f position.X position.Y)) <SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">in</SPAN><BR>&nbsp;<SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">new</SPAN> Point3DCollection(new_positions)<BR><BR><SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: green; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">// map the plane&rsquo;s z coordiante using a cos wave of the y coordiante</SPAN><BR><SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">let</SPAN> map_positions_cos_y = <BR>&nbsp;map_positions (<SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">fun</SPAN> _ y -&gt; Math.Cos(y * Math.PI))<BR><BR><SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: green; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">// map the plane&rsquo;s z coordiante using a cos wave of the x and y coordiantes</SPAN><BR><SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">let</SPAN> map_positions_cos_xy = <BR>&nbsp;map_positions (<SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">fun</SPAN> x y -&gt; Math.Cos(x * Math.PI) * Math.Cos(y * Math.PI))<BR><BR><SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: green; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">// map the plane&rsquo;s z coordiante using a cos wave of the x and y coordiantes, that </SPAN><BR><SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: green; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">// has been scaled to give a rippled effect</SPAN><BR><SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">let</SPAN> map_positions_waves = <BR>&nbsp;map_positions (<SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">fun</SPAN> x y -&gt; (Math.Cos(x * Math.PI * 4.0) / 3.0) * (Math.Cos(y * Math.PI * 2.0) / 3.0)) <BR><BR><SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: green; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">// map the plane&rsquo;s Z coordiante randomly</SPAN><BR><SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">let</SPAN> map_positions_random = <BR>&nbsp;<SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">let</SPAN> rand = <SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">new</SPAN> Random() <SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">in</SPAN><BR>&nbsp;map_positions (<SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">fun</SPAN> _ _ -&gt; rand.NextDouble() / 10.0) <BR><BR>[&lt;STAThread&gt;<STATHREAD>]<BR><SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">do</SPAN><BR>&nbsp;<SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: green; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">// create our window</SPAN><BR>&nbsp;<SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">let</SPAN> window = create_window <SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: red; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">&ldquo;Window1.xaml&rdquo;</SPAN> <SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">in</SPAN><BR>&nbsp;<SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: green; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">// grab the 3D view port</SPAN><BR>&nbsp;<SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">let</SPAN> viewport = window.FindName(<SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: red; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">&ldquo;ViewPort&rdquo;</SPAN>) :?&gt; Viewport3D <SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">in</SPAN><BR>&nbsp;<SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: green; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">// find all the meshes and get the first one</SPAN><BR>&nbsp;<SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">let</SPAN> meshes = find_meshes viewport <SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">in</SPAN><BR>&nbsp;<SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">let</SPAN> mesh = IEnumerable.hd meshes <SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">in</SPAN><BR>&nbsp;<SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: green; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">// add plane to the mesh</SPAN><BR>&nbsp;add_plane_to_mesh mesh 20 20;<BR>&nbsp;<SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: green; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">// apply a transformation to the plane</SPAN><BR>&nbsp;mesh.Positions &lt;- map_positions_waves mesh.Positions;<BR>&nbsp;<SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: green; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">// show the window</SPAN><BR>&nbsp;<SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">let</SPAN> app = <SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">new</SPAN> Application() <SPAN style="FONT-WEIGHT: normal; FONT-SIZE: 11px; COLOR: blue; FONT-FAMILY: Lucida Console; BACKGROUND-COLOR: transparent">in</SPAN>&nbsp;<BR>&nbsp;app.Run(window) |&gt; ignore</SPAN></SPAN></P>
<P class=NormalVerdana style="MARGIN: 0in 0in 0pt"><SPAN style="FONT-SIZE: 10pt"><FONT face=Verdana></FONT></SPAN>&nbsp;</P>
<P class=NormalVerdana style="MARGIN: 0in 0in 0pt"><SPAN style="FONT-SIZE: 10pt"><o:p><FONT face=Verdana>
<HR id=null>
</FONT><a href="/o:p">/o:p</a></SPAN>
<P></P>
<P><FONT face=Verdana size=2><WINDOW<BR><WINDOW<BR><WINDOW<BR>&lt;Window<BR>&nbsp;&nbsp;&nbsp; <BR>xmlns=&rdquo;<A href="http://schemas.microsoft.com/winfx/2006/xaml/presentation"><a href="http://schemas.microsoft.com/winfx/2006/xaml/presentation">http://schemas.microsoft.com/winfx/2006/xaml/presentation</a></A>&ldquo;<BR>&nbsp;&nbsp;&nbsp; <BR>xmlns:x=&rdquo;<A href="http://schemas.microsoft.com/winfx/2006/xaml"><a href="http://schemas.microsoft.com/winfx/2006/xaml">http://schemas.microsoft.com/winfx/2006/xaml</a></A>&ldquo;<BR>&nbsp;&nbsp;&nbsp; Title=&ldquo;RichContent&rdquo;<BR>&nbsp;&nbsp;&nbsp; &gt;</FONT></P>
<P><FONT face=Verdana size=2>&nbsp; &lt;Viewport3D Name=&ldquo;ViewPort&rdquo;&gt;</FONT></P>
<P><FONT face=Verdana size=2>&nbsp;&nbsp;&nbsp; &lt;Viewport3D.Camera&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;PerspectiveCamera Position=&ldquo;0,0,2&rdquo; LookDirection=&ldquo;0,0,-1&rdquo; FieldOfView=&ldquo;60&rdquo; /&gt;<BR>&nbsp;&nbsp;&nbsp; &lt;/Viewport3D.Camera&gt;</FONT></P>
<P><FONT face=Verdana size=2>&nbsp;&nbsp;&nbsp; &lt;Viewport3D.Children&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;ModelVisual3D&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;ModelVisual3D.Content&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Model3DGroup &gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Model3DGroup.Children&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;AmbientLight Color=&ldquo;White&rdquo; /&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;GeometryModel3D&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;GeometryModel3D.Geometry&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;MeshGeometry3D /&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/GeometryModel3D.Geometry&gt;</FONT></P>
<P><FONT face=Verdana size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;GeometryModel3D.Transform&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;RotateTransform3D&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;RotateTransform3D.Rotation&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;AxisAngleRotation3D x:Name=&ldquo;MyRotation3D&rdquo; Angle=&ldquo;45&rdquo; Axis=&ldquo;0,1,0&rdquo;/&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/RotateTransform3D.Rotation&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/RotateTransform3D&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/GeometryModel3D.Transform&gt;</FONT></P>
<P><FONT face=Verdana size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;GeometryModel3D.Material&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;DiffuseMaterial&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;DiffuseMaterial.Brush&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;ImageBrush ImageSource=&ldquo;venus.jpg&rdquo; /&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/DiffuseMaterial.Brush&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/DiffuseMaterial&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/GeometryModel3D.Material&gt;</FONT></P>
<P><FONT face=Verdana size=2>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/GeometryModel3D&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/Model3DGroup.Children&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/Model3DGroup&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/ModelVisual3D.Content&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/ModelVisual3D&gt;<BR>&nbsp;&nbsp;&nbsp; &lt;/Viewport3D.Children&gt;</FONT></P>
<P><FONT face=Verdana size=2>&nbsp;&nbsp;&nbsp; &lt;Viewport3D.Triggers&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;EventTrigger RoutedEvent=&ldquo;Viewport3D.Loaded&rdquo;&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;EventTrigger.Actions&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;BeginStoryboard&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;Storyboard&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;DoubleAnimation From=&ldquo;-90&rdquo; To=&ldquo;90&rdquo; Duration=&ldquo;0:0:12&rdquo; <BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Storyboard.TargetName=&ldquo;MyRotation3D&rdquo;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Storyboard.TargetProperty=&ldquo;Angle&rdquo; RepeatBehavior=&ldquo;Forever&rdquo; AutoReverse=&ldquo;True&rdquo; /&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/Storyboard&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/BeginStoryboard&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/EventTrigger.Actions&gt;<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/EventTrigger&gt;<BR>&nbsp;&nbsp;&nbsp; &lt;/Viewport3D.Triggers&gt;<BR>&nbsp; &lt;/Viewport3D&gt;</FONT></P>
<P><FONT face=Verdana size=2>&lt;/Window&gt;<BR></FONT><FONT face=Verdana size=2></FONT></P></p>

<h3 id="feedback">Feedback:</h3>

<p><em>Feedback was imported from my only blog engine, it&rsquo;s no longer possible to post feedback here.</em></p>

<p><strong>re: Bending the Cat: F# meets WPF 3D - <a href="http://strangelights.com/blog">Robert Pickering</a></strong></p>

<p>I have updated the code in the artical and in the download to shorten the find_meshes function. I know use:
<br>
<br>|&gt; IEnumerable.choose (function :? ModelVisual3D as c -&gt; Some(c.Content) | _ -&gt; None)
<br>|&gt; IEnumerable.choose (function :? Model3DGroup as mg -&gt; Some(mg.Children) | _ -&gt; None)
<br>|&gt; IEnumerable.concat
<br>|&gt; IEnumerable.choose (function :? GeometryModel3D as mg -&gt; Some(x.Geometry) | _ -&gt; None)
<br>|&gt; IEnumerable.choose (function :? MeshGeometry3D as mv -&gt; Some(mv) | _ -&gt; None)
<br>
<br>
<br>Instead of
<br>
<br>|&gt; IEnumerable.filter (fun child -&gt; (child :? ModelVisual3D))
<br> |&gt; IEnumerable.map (fun x -&gt; (match x with | :? ModelVisual3D as mv -&gt; mv | _ -&gt; failwith &quot;won&rsquo;t happen&quot;))
<br> |&gt; IEnumerable.filter (fun x -&gt; (x.Content :? Model3DGroup))
<br> |&gt; IEnumerable.map (fun x -&gt; match x.Content with | :? Model3DGroup as mg -&gt; mg | _ -&gt; failwith &quot;won&rsquo;t happen&quot; )
<br> |&gt; IEnumerable.map (fun x -&gt; x.Children )
<br> |&gt; IEnumerable.concat
<br> |&gt; IEnumerable.filter (fun x -&gt; (x :? GeometryModel3D))
<br> |&gt; IEnumerable.map (fun x -&gt; match x with | :? GeometryModel3D as mv -&gt; mv | _ -&gt; failwith &quot;won&rsquo;t happen&quot; )
<br> |&gt; IEnumerable.filter (fun x -&gt; (x.Geometry :? MeshGeometry3D))
<br> |&gt; IEnumerable.map (fun x -&gt; match x.Geometry with | :? MeshGeometry3D as mv -&gt; mv | _ -&gt; failwith &quot;won&rsquo;t happen&quot; )
<br>
<br>Thanks to Don Syme for the suggestion</p>

<p><strong>re: Bending the Cat: F# meets WPF 3D - Alex Grenier</strong></p>

<p>Wow&hellip; pretty nice usage of some cutting edge stuff!<br />Do you have any tips on how can I get this to build and run under Orcas beta 2 after installing F# 1.9.2?<br />Cheers!</p>

<p><strong>re: Bending the Cat: F# meets WPF 3D - <a href="http://strangelights.com/">Robert Pickering</a></strong></p>

<p>Thanks!<br /><br />Yes you can find out how to fix F#/VS Orcas here:<br /><a href="http://gbarnett.org/archive/2007/08/03/how-to-get-f-working-on-vs-2008-beta-2.aspx">http://gbarnett.org/archive/2007/08/03/how-to-get-f-working-on-vs-2008-beta-2.aspx</a></p>

<p><strong>re: Bending the Cat: F# meets WPF 3D - Alex Grenier</strong></p>

<p>Thanks!<br /><br />Once F# properly registered with Orcas, all I had to do is point to the 3.0 WPF assemblies on this Longhorn box. I suppose that&rsquo;s the path of 3.0 when bundled with the OS.<br /><br />So compile options become:<br /><br />-I &ldquo;C:\Program Files\Reference Assemblies\Microsoft\Framework\v3.0&rdquo; -r &ldquo;PresentationCore.dll&rdquo; -r &ldquo;PresentationFramework.dll&rdquo; -r &ldquo;WindowsBase.dll&rdquo;<br /><br />Instead of:<br /><br />-I &ldquo;C:\Program Files\Reference Assemblies\Microsoft\WinFX\v3.0&rdquo; -r &ldquo;PresentationCore.dll&rdquo; -r &ldquo;PresentationFramework.dll&rdquo; -r &ldquo;WindowsBase.dll&rdquo;<br /><br /></p>

<p><strong>re: Bending the Cat: F# meets WPF 3D - pocky</strong></p>

<p>good sample and if we need to load many xaml files to one scence, How can we do ?</p>
</div>

		<p class="meta">Posted on <span class="postdate">23. June 2006</span></p>
	</article>

			</div>

			<footer id="footer">
				<p class="copyright">
					
						Powered by <a href="https://gohugo.io/">Hugo</a> and the
						<a href="https://github.com/bake/solar-theme-hugo">Solar</a>-theme.
					
				</p>
			</footer>
		</div>

		
	</body>
</html>
